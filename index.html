<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Happy New Year</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:400&display=swap" rel="stylesheet">

  <style>
    
/* ================================================= */
/* =================== –ë–ê–ó–ê ======================== */
/* ================================================= */

html,
body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

body {
  background: black;
  font-family: 'Montserrat', sans-serif;
}


/* ================================================= */
/* =================== –°–¶–ï–ù–´ ======================= */
/* ================================================= */

.scene {
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 100vh;
  z-index: 1;
}

.hidden {
  display: none !important;
}

.background {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}


/* ================================================= */
/* =============== –°–¶–ï–ù–ê 1: –ö–û–¢ ==================== */
/* ================================================= */

.cat {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  cursor: pointer;
}

.cat--lying {
  bottom: 8vh;
  width: 34vw;
  max-width: 300px;
}

.cat--standing {
  bottom: 11vh;
  width: 56vw;
  max-width: 500px;
  display: none;
}


/* ================================================= */
/* ========= –°–¶–ï–ù–´ 2 / 2.1: –¢–ï–ö–°–¢ –ò –í–´–ë–û–† =========== */
/* ================================================= */

.dialog {
  position: absolute;
  top: 10vh;
  left: 50%;
  transform: translateX(-50%);
  width: 85%;
  max-width: 420px;
  color: #ffffff;
  font-size: 18px;
  line-height: 1.6;
  white-space: pre-line;
  z-index: 5;
}

.choices {
  position: absolute;
  top: 55vh;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 16px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.4s ease;
  z-index: 6;
}

.choices.visible {
  opacity: 1;
  pointer-events: auto;
}

.choice-btn {
  min-width: 120px;
  padding: 12px 20px;
  background: rgba(0, 0, 0, 0.55);
  color: #ffffff;
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}


/* ================================================= */
/* ================== –°–¶–ï–ù–ê 3 ====================== */
/* ================================================= */

.village-cat {
  position: absolute;
  left: 10%;
  bottom: 5vh;
  width: 50vw;
  max-width: 660px;
  cursor: pointer;
  z-index: 4;
}

.village {
  position: absolute;
  right: 3%;
  bottom: 33vh;
  width: 70vw;
  max-width: 730px;
  cursor: pointer;
  pointer-events: none;
  z-index: 3;
}

.village.active {
  pointer-events: auto;
}

.dialog-v3 {
  position: absolute;
  top: 14vh;
  left: 50%;
  transform: translateX(-50%);
  width: 85%;
  max-width: 420px;
  color: #ffffff;
  font-size: 18px;
  line-height: 1.6;
  white-space: pre-line;
  z-index: 7;
  background: rgba(0, 0, 0, 0.9);
  padding: 14px 16px;
  border-radius: 10px;
}


/* ================================================= */
/* ================== –°–¶–ï–ù–ê 4 ====================== */
/* ================================================= */

.scene-v4-cat {
  left: auto;
  right: 0%;
  bottom: 4vh;
  width: 65vw;
  max-width: 830px;
}

.scene-v4-house {
  position: absolute;
  left: 6%;
  bottom: 44vh;
  width: 45vw;
  max-width: 565px;
}


/* ================================================= */
/* ============== –ü–û–î–ê–†–ö–ò (–û–ë–©–ò–ï) ================== */
/* ================================================= */

.gift {
  position: absolute;
  left: 8%;
  bottom: 5vh;
  cursor: pointer;
  z-index: 5;
}

.gift-closed {
  width: 22vw;
  max-width: 230px;
}

.gift-open {
  width: 34vw;
  max-width: 350px;
  display: none;
  pointer-events: none;
}


/* ================================================= */
/* ============== –°–¶–ï–ù–ê 5: –î–û–ú ===================== */
/* ================================================= */

.scene-5-window {
  position: absolute;
  left: 44%;
  bottom: 18vh;
  width: 10vw;
  max-width: 148px;
  z-index: 4;
  cursor: pointer;
}

.scene-5-door {
  position: absolute;
  left: 62%;
  bottom: 15.5vh;
  width: 11vw;
  max-width: 210px;
  z-index: 4;
  cursor: pointer;
}


/* ================================================= */
/* ============ –ü–û–î–ê–†–û–ö: –°–¶–ï–ù–ê 5.1 ================= */
/* ================================================= */

.gift-51-closed {
  left: 17%;
  bottom: 15vh;
  width: 50vw;
  max-width: 495px;
}

.gift-51-open {
  left: 17%;
  bottom: 15vh;
  width: 60vw;
  max-width: 520px;
  display: none;
  pointer-events: none;
}


/* ================================================= */
/* ============ –ü–û–î–ê–†–û–ö: –°–¶–ï–ù–ê 6 =================== */
/* ================================================= */

.gift-6-closed {
  left: 16%;
  bottom: 20vh;
  width: 22vw;
  max-width: 260px;
  pointer-events: none;
}

.gift-6-open {
  right: 22%;
  bottom: 20vh;
  width: 36vw;
  max-width: 430px;
  display: none;
  pointer-events: none;
}


/* ================================================= */
/* ============ –ü–û–î–ê–†–ö–ò: –°–¶–ï–ù–ê 6.1 (–ö–£–•–ù–Ø) ========== */
/* ================================================= */


/* ===== –ü–û–î–ê–†–û–ö 04 (–ù–ê –•–û–õ–û–î–ò–õ–¨–ù–ò–ö–ï) ===== */

.gift-61-04-closed {
  position: absolute;

  /* ‚¨ÖÔ∏è –¥–≤–∏–≥–∞–π –≤–ø—Ä–∞–≤–æ/–≤–ª–µ–≤–æ */
  right: 28%;

  /* ‚¨ÜÔ∏è –¥–≤–∏–≥–∞–π –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ */
  top: 22vh;

  /* üìè —Ä–∞–∑–º–µ—Ä –∑–∞–∫—Ä—ã—Ç–æ–≥–æ */
  width: 14vw;
  max-width: 180px;

  cursor: pointer;
  z-index: 6;
}

.gift-61-04-open {
  position: absolute;

  /* ‚ùó —Ç–µ –∂–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã */
  right: 28%;
  top: 22vh;

  /* üìè —Ä–∞–∑–º–µ—Ä –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ */
  width: 20vw;
  max-width: 260px;

  display: none;
  pointer-events: none;
  z-index: 6;
}


/* ===== –ü–û–î–ê–†–û–ö 05 (–ù–ê –ü–û–õ–£) ===== */

.gift-61-05-closed {
  position: absolute;

  /* ‚¨ÖÔ∏è –≤–ø—Ä–∞–≤–æ/–≤–ª–µ–≤–æ */
  right: 12%;

  /* ‚¨áÔ∏è –≤–≤–µ—Ä—Ö/–≤–Ω–∏–∑ */
  bottom: 8vh;

  width: 18vw;
  max-width: 240px;

  cursor: pointer;
  z-index: 6;
}

.gift-61-05-open {
  position: absolute;

  right: 12%;
  bottom: 8vh;

  width: 26vw;
  max-width: 340px;

  display: none;
  pointer-events: none;
  z-index: 6;
}





/* ================================================= */
/* ================== –û–í–ï–†–õ–ï–ò ====================== */
/* ================================================= */

/* ----- –ü–∏—Å—å–º–æ (–°—Ü–µ–Ω–∞ 5) ----- */
.letter-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 20;
  pointer-events: auto;
}

.letter {
  background: #EAE0CF;
  color: #000;
  padding: 26px 24px;
  border-radius: 18px;
  width: 85%;
  max-width: 420px;
  font-size: 18px;
  line-height: 1.6;
  white-space: pre-line;
  text-align: center;
}

.letter button {
  margin-top: 22px;
  padding: 10px 26px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: #000;
  color: #fff;
  display: none;
}


/* ----- –û—Ç–∫—Ä—ã—Ç–∫–∞ (–°—Ü–µ–Ω—ã 5.1 / 6) ----- */
.postcard-overlay {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 20;
  pointer-events: auto;
}

.postcard {
  width: 90vw;
  max-width: 620px;
  height: auto;
}

.postcard-btn {
  margin-top: 20px;
  padding: 10px 26px;
  font-size: 16px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  background: #000;
  color: #fff;
}


/* ================================================= */
/* ============== –ö–ù–û–ü–ö–ò –ò –ù–ê–í–ò–ì–ê–¶–ò–Ø ================ */
/* ================================================= */

/* ----- –ö–Ω–æ–ø–∫–∞ "–ó–∞–π—Ç–∏ –≤ –¥–æ–º" (–°—Ü–µ–Ω–∞ 5.1) ----- */
.enter-house-btn {
  position: absolute;
  bottom: 4vh;
  left: 50%;
  transform: translateX(-50%);
  padding: 12px 28px;
  font-size: 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  background: rgba(0, 0, 0, 0.7);
  color: #fff;
  z-index: 10;
}


/* ----- –ö–Ω–æ–ø–∫–∏-—ç–º–æ–¥–∑–∏ (–°—Ü–µ–Ω–∞ 6) ----- */
.emoji-btn {
  position: absolute;
  bottom: 54vh;
  padding: 14px 18px;
  font-size: 32px;
  background: rgba(0, 0, 0, 0.55);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 14px;
  cursor: pointer;
  z-index: 6;
  pointer-events: none;
  opacity: 0.4;
  transition: transform 0.25s ease, opacity 0.25s ease;
}

.emoji-left {
  left: 12%;
}

.emoji-right {
  right: 12%;
}

.emoji-btn.active {
  pointer-events: auto;
  opacity: 1;
}

.emoji-btn.active:hover {
  transform: scale(1.1);
}

/* ----- –ö–Ω–æ–ø–∫–∞ "–ó–∞–π—Ç–∏ –≤ –≥–æ—Å—Ç–∏–Ω—É—é" (–°—Ü–µ–Ω–∞ 6.1) ----- */
.enter-livingroom-btn {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  padding: 14px 32px;
  font-size: 18px;
  background: rgba(0, 0, 0, 0.75);
  color: #ffffff;
  border: 1px solid rgba(255, 255, 255, 0.35);
  border-radius: 10px;
  cursor: pointer;
  z-index: 10;
}

.enter-livingroom-btn:hover {
  background: rgba(0, 0, 0, 0.9);
}


    
  </style>  
</head>







  
<body>

<!-- ================================================= -->
<!-- ==================== –°–¶–ï–ù–´ ===================== -->
<!-- ================================================= -->

<!-- ================= –°–¶–ï–ù–ê 1: –ù–û–ß–¨ ================= -->
<div class="scene" id="sceneNight">
  <img src="assets/svg/scene-night.svg" class="background">

  <!-- –ö–û–¢ -->
  <img src="assets/svg/lying-cat.svg" class="cat cat--lying" id="lyingCat">
  <img src="assets/svg/standing-cat.svg" class="cat cat--standing" id="standingCat">
</div>

<!-- ================= –°–¶–ï–ù–ê 2: –ö–†–£–ü–ù–´–ô –ü–õ–ê–ù ================= -->
<div class="scene hidden" id="sceneCloseup">
  <img src="assets/svg/scene-closeup.svg" class="background">

  <!-- –¢–ï–ö–°–¢ -->
  <div class="dialog" id="dialogCalm"></div>

  <!-- –í–´–ë–û–† -->
  <div class="choices" id="choicesCalm">
    <button class="choice-btn" id="btnYes">–î–∞</button>
    <button class="choice-btn" id="btnNo">–ù–µ—Ç</button>
  </div>
</div>

<!-- ================= –°–¶–ï–ù–ê 2.1: –ó–õ–û–ô –ö–û–¢ ================= -->
<div class="scene hidden" id="sceneCloseupAngry">
  <img src="assets/svg/scene-closeup-angry.svg" class="background">

  <!-- –¢–ï–ö–°–¢ -->
  <div class="dialog" id="dialogAngry"></div>

  <!-- –í–´–ë–û–† -->
  <div class="choices" id="choicesAngry">
    <button class="choice-btn" id="btnOk">–õ–∞–¥–Ω–æ</button>
  </div>
</div>

<!-- ================= –°–¶–ï–ù–ê 3: –î–ï–†–ï–í–ù–Ø (–î–ê–õ–ï–ö–û) ================= -->
<div class="scene hidden" id="sceneNightHouses">
  <img src="assets/svg/scene-night-houses.svg" class="background">

  <!-- –ü–ï–†–°–û–ù–ê–ñ–ò –ò –§–û–ù -->
  <img src="assets/svg/village-distant-cat.svg" class="village-cat" id="villageCat">
  <img src="assets/svg/village-distant.svg" class="village" id="village">

  <!-- –¢–ï–ö–°–¢ -->
  <div class="dialog-v3 hidden" id="dialogVillage"></div>
</div>

<!-- ================= –°–¶–ï–ù–ê 4: –î–ï–†–ï–í–ù–Ø (–ë–õ–ò–ó–ö–û) ================= -->
<div class="scene hidden" id="sceneVillageNearby">
  <img src="assets/svg/scene-night-village-nearby.svg" class="background">

  <!-- –ü–ï–†–°–û–ù–ê–ñ–ò –ò –û–ë–™–ï–ö–¢–´ -->
  <img
    src="assets/svg/village-nearby-cat.svg"
    class="village-cat scene-v4-cat"
    id="villageNearbyCat"
  >
  <img
    src="assets/svg/house-lit.svg"
    class="village scene-v4-house"
    id="houseLit"
  >

  <!-- –¢–ï–ö–°–¢ -->
  <div class="dialog-v3 hidden" id="dialogHouseHint"></div>
</div>

<!-- ================= –°–¶–ï–ù–ê 5: –î–û–ú –°–ù–ê–†–£–ñ–ò ================= -->
<div class="scene hidden" id="sceneHouse">
  <img src="assets/svg/scene-house.svg" class="background">

  <!-- –¢–ï–ö–°–¢ -->
  <div class="dialog-v3 hidden" id="dialogHouseIntro"></div>

  <!-- –û–ö–ù–û -->
  <img
    src="assets/svg/window.svg"
    class="scene-5-window"
    id="houseWindow"
  >

  <!-- –î–í–ï–†–¨ -->
  <img
    src="assets/svg/door.svg"
    class="scene-5-door"
    id="houseDoor"
  >

  <!-- –ü–û–î–ê–†–û–ö -->
  <img src="assets/svg/gift-closed-01.svg" class="gift gift-closed" id="giftClosed">
  <img src="assets/svg/gift-open-01.svg" class="gift gift-open" id="giftOpen">
</div>

<!-- ================= –°–¶–ï–ù–ê 5.1: –û–ö–ù–û ================= -->
<div class="scene hidden" id="sceneWindow">
  <img src="assets/svg/scene-window.svg" class="background">

  <!-- –ü–û–î–ê–†–û–ö -->
  <img
    src="assets/svg/gift-closed-02.svg"
    class="gift gift-closed gift-51-closed"
    id="gift51Closed"
  >
  <img
    src="assets/svg/gift-open-02.svg"
    class="gift gift-open gift-51-open"
    id="gift51Open"
  >

  <!-- –ö–ù–û–ü–ö–ê –ü–ï–†–ï–•–û–î–ê –í –î–û–ú -->
  <button class="enter-house-btn hidden" id="btnEnterHouse">
    –ó–∞–π—Ç–∏ –≤ –¥–æ–º
  </button>
</div>

<!-- ================= –°–¶–ï–ù–ê 6: –ö–û–†–ò–î–û–† ================= -->
<div class="scene hidden" id="sceneCorridor">
  <img src="assets/svg/scene-corridor.svg" class="background">

  <!-- –¢–ï–ö–°–¢ -->
  <div class="dialog-v3 hidden" id="dialogCorridor"></div>

  <!-- –ü–û–î–ê–†–û–ö -->
  <img
    src="assets/svg/gift-closed-03.svg"
    class="gift gift-closed gift-6-closed"
    id="gift6Closed"
  >
  <img
    src="assets/svg/gift-open-03.svg"
    class="gift gift-open gift-6-open"
    id="gift6Open"
  >

  <!-- –ö–ù–û–ü–ö–ò –í–´–ë–û–†–ê -->
  <button class="emoji-btn emoji-left" id="btnLivingroom">üõã</button>
  <button class="emoji-btn emoji-right" id="btnKitchen">üçΩ</button>
</div>

<!-- ================= –°–¶–ï–ù–ê 6.1: –ö–£–•–ù–Ø ================= -->
<div class="scene hidden" id="sceneKitchen">
  <img src="assets/svg/scene-kitchen.svg" class="background">

    <!-- ===== –ü–û–î–ê–†–û–ö 04 (–ù–ê –•–û–õ–û–î–ò–õ–¨–ù–ò–ö–ï) ===== -->
  <img
    src="assets/svg/gift-closed-04.svg"
    class="gift gift-61-04-closed"
    id="gift6104Closed"
  >
  <img
    src="assets/svg/gift-open-04.svg"
    class="gift gift-61-04-open"
    id="gift6104Open"
  >

  <!-- ===== –ü–û–î–ê–†–û–ö 05 (–ù–ê –ü–û–õ–£) ===== -->
  <img
    src="assets/svg/gift-closed-05.svg"
    class="gift gift-61-05-closed"
    id="gift6105Closed"
  >
  <img
    src="assets/svg/gift-open-05.svg"
    class="gift gift-61-05-open"
    id="gift6105Open"
  >

    <!-- ===== –ö–ù–û–ü–ö–ê –ü–ï–†–ï–•–û–î–ê –í –ì–û–°–¢–ò–ù–£–Æ ===== -->
  <button
    class="enter-livingroom-btn hidden"
    id="btnGoLivingroom"
  >
    –ó–∞–π—Ç–∏ –≤ –≥–æ—Å—Ç–∏–Ω—É—é
  </button>
</div>

<!-- ================= –°–¶–ï–ù–ê 7: –ì–û–°–¢–ò–ù–ù–ê–Ø ================= -->
<div class="scene hidden" id="sceneLivingroom">
  <img src="assets/svg/scene-livingroom.svg" class="background">
</div>

<!-- ================================================= -->
<!-- =================== –û–í–ï–†–õ–ï–ò ===================== -->
<!-- ================================================= -->

<!-- ===== –ü–ò–°–¨–ú–û ===== -->
<div class="letter-overlay hidden" id="letterOverlay">
  <div class="letter">
    <div id="letterText"></div>
    <button id="btnNext">–î–∞–ª—å—à–µ</button>
  </div>
</div>

<!-- ===== –û–¢–ö–†–´–¢–ö–ê (–°–¶–ï–ù–ê 5.1) ===== -->
<div class="postcard-overlay hidden" id="postcard51Overlay">
  <img src="assets/img/postcard-02.png" class="postcard" alt="Postcard">
  <button class="postcard-btn" id="btnPostcardNext">–î–∞–ª—å—à–µ</button>
</div>

<!-- ===== –û–¢–ö–†–´–¢–ö–ê (–°–¶–ï–ù–ê 6) ===== -->
<div class="postcard-overlay hidden" id="postcard6Overlay">
  <img src="assets/img/postcard-03.png" class="postcard" alt="Postcard">
  <button class="postcard-btn" id="btnPostcard6Next">–î–∞–ª—å—à–µ</button>
</div>

<!-- ===== –û–¢–ö–†–´–¢–ö–ê (–°–¶–ï–ù–ê 6.1 ‚Äì –ö–£–•–ù–Ø) ===== -->
<div class="postcard-overlay hidden" id="postcard61Overlay">
  <img
  src="assets/img/postcard-04.png"
  class="postcard"
  alt="Postcard"
  id="postcard61Image"
>
  <button class="postcard-btn" id="btnPostcard61Next">–î–∞–ª—å—à–µ</button>
</div>


  
  <script>
/* ================================================= */
/* ================= DOM –≠–õ–ï–ú–ï–ù–¢–´ ================== */
/* ================================================= */

/* --- –ü–µ—Ä—Å–æ–Ω–∞–∂–∏ --- */
const lyingCat = document.getElementById('lyingCat');
const standingCat = document.getElementById('standingCat');

/* --- –°—Ü–µ–Ω—ã --- */
const sceneNight = document.getElementById('sceneNight');
const sceneCloseup = document.getElementById('sceneCloseup');
const sceneCloseupAngry = document.getElementById('sceneCloseupAngry');
const sceneNightHouses = document.getElementById('sceneNightHouses');
const sceneVillageNearby = document.getElementById('sceneVillageNearby');
const sceneHouse = document.getElementById('sceneHouse');
const sceneWindow = document.getElementById('sceneWindow');
const sceneCorridor = document.getElementById('sceneCorridor');
const sceneKitchen = document.getElementById('sceneKitchen');
const sceneLivingroom = document.getElementById('sceneLivingroom');

/* --- –î–∏–∞–ª–æ–≥–∏ --- */
const dialogCalm = document.getElementById('dialogCalm');
const dialogAngry = document.getElementById('dialogAngry');
const dialogVillage = document.getElementById('dialogVillage');
const dialogHouseHint = document.getElementById('dialogHouseHint');
const dialogHouseIntro = document.getElementById('dialogHouseIntro');
const dialogCorridor = document.getElementById('dialogCorridor');

/* --- –í—ã–±–æ—Ä—ã --- */
const choicesCalm = document.getElementById('choicesCalm');
const choicesAngry = document.getElementById('choicesAngry');

/* --- –ö–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ --- */
const btnYes = document.getElementById('btnYes');
const btnNo = document.getElementById('btnNo');
const btnOk = document.getElementById('btnOk');

/* --- –û–±—ä–µ–∫—Ç—ã —Å—Ü–µ–Ω --- */
const villageCat = document.getElementById('villageCat');
const village = document.getElementById('village');
const villageNearbyCat = document.getElementById('villageNearbyCat');
const houseLit = document.getElementById('houseLit');
const houseWindow = document.getElementById('houseWindow');
const houseDoor = document.getElementById('houseDoor');

/* --- –ü–æ–¥–∞—Ä–∫–∏ --- */
const giftClosed = document.getElementById('giftClosed');
const giftOpen = document.getElementById('giftOpen');
const gift51Closed = document.getElementById('gift51Closed');
const gift51Open = document.getElementById('gift51Open');
const gift6Closed = document.getElementById('gift6Closed');
const gift6Open = document.getElementById('gift6Open');
const gift6104Closed = document.getElementById('gift6104Closed');
const gift6104Open = document.getElementById('gift6104Open');
const gift6105Closed = document.getElementById('gift6105Closed');
const gift6105Open = document.getElementById('gift6105Open');

/* --- –û–≤–µ—Ä–ª–µ–∏ --- */
const letterOverlay = document.getElementById('letterOverlay');
const letterTextEl = document.getElementById('letterText');
const btnNext = document.getElementById('btnNext');

const postcard51Overlay = document.getElementById('postcard51Overlay');
const btnPostcardNext = document.getElementById('btnPostcardNext');
const postcard6Overlay = document.getElementById('postcard6Overlay');
const btnPostcard6Next = document.getElementById('btnPostcard6Next');
const postcard61Overlay = document.getElementById('postcard61Overlay');
const btnPostcard61Next = document.getElementById('btnPostcard61Next');
const postcard61Image = document.getElementById('postcard61Image');


/* --- –ù–∞–≤–∏–≥–∞—Ü–∏—è --- */
const btnEnterHouse = document.getElementById('btnEnterHouse');
const btnLivingroom = document.getElementById('btnLivingroom');
const btnKitchen = document.getElementById('btnKitchen');
const btnGoLivingroom = document.getElementById('btnGoLivingroom');

/* ================================================= */
/* ===================== –¢–ï–ö–°–¢–´ ==================== */
/* ================================================= */

const calmText = `–Ø –Ω–µ –ª—é–±–ª—é —Å–ø–µ—à–∫—É.
–ù–æ –≤ —ç—Ç—É –Ω–æ—á—å –¥–∞–∂–µ —è —Ä–µ—à–∏–ª –≤—ã–π—Ç–∏ –∏–∑ —Ç–µ–Ω–∏.
–í–ø–µ—Ä–µ–¥–∏ ‚Äî –æ–≥–Ω–∏, —Ç–µ–ø–ª–æ
–∏ –∫–æ–µ-—á—Ç–æ, —á—Ç–æ —Å—Ç–æ–∏—Ç —É–≤–∏–¥–µ—Ç—å.
–•–æ—á–µ—à—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è —Å–æ –º–Ω–æ–π
–≤ –Ω–µ–±–æ–ª—å—à–æ–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ —ç—Ç–æ–π –Ω–æ–≤–æ–≥–æ–¥–Ω–µ–π –Ω–æ—á—å—é?`;

const angryText = `–®—à—à—à—à‚Ä¶
–¢—ã –∞—Ö—Ä–µ–Ω–µ–ª(–∞)?
–Ø –¥–ª—è —á–µ–≥–æ, –ø–æ-—Ç–≤–æ–µ–º—É, –≤—Å—Ç–∞–ª?
–•–æ—á–µ—à—å –∏–ª–∏ –Ω–µ—Ç ‚Äî –ø—Ä–∏–¥—ë—Ç—Å—è.`;

const villageText = `–í–∏–¥–∏—à—å –¥–µ—Ä–µ–≤—É—à–∫—É –≤–ø–µ—Ä–µ–¥–∏?
–¢–∞–º —Ç–µ–ø–ª–æ –∏ —Å–≤–µ—Ç.
–ü–æ–π–¥—ë–º –∫ –Ω–µ–π.`;

const houseHintText = `–û, –≤ –æ–¥–Ω–æ–º –¥–æ–º–µ –≥–æ—Ä–∏—Ç —Å–≤–µ—Ç.
–ù–∞–º —Ç—É–¥–∞.`;

const houseIntroText = `–î–æ—à–ª–∏. –ö–∞–∫ –¥—É–º–∞–µ—à—å, —Å—Ç–æ–∏—Ç —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥–ª—è–Ω—É—Ç—å –≤ –æ–∫–Ω–æ –∏–ª–∏ —Å—Ä–∞–∑—É –∑–∞–π–¥—ë–º?

–û, –∞ –µ—â—ë —è —Ç—É—Ç –≤–∏–∂—É –ø–æ–¥–∞—Ä–æ—á–µ–∫.`;

const letterText = `–¢—ã –≤ —ç—Ç–æ–º –≥–æ–¥—É –±—ã–ª(–∞) –º–æ–ª–æ–¥—Ü–æ–º ‚ú®
–ú–æ–∂–µ—Ç, –±—ã–ª–æ —Ç—Ä—É–¥–Ω–æ, –∞ –º–æ–∂–µ—Ç ‚Äî –ª–µ–≥–∫–æ,
–Ω–æ —Ç—ã —Å–ø—Ä–∞–≤–∏–ª—Å—è(–∞—Å—å) ü§ç
–ü—É—Å—Ç—å —Å–ª–µ–¥—É—é—â–∏–π –≥–æ–¥ –±—É–¥–µ—Ç –Ω–∞–ø–æ–ª–Ω–µ–Ω 
—Ç—ë–ø–ª—ã–º–∏ –º–æ–º–µ–Ω—Ç–∞–º–∏ 
—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ–º –∏ —Ä–∞–¥–æ—Å—Ç—å—é üéÑ`;

const corridorText = `–ú–º–º‚Ä¶ –ó–¥–µ—Å—å —Ç–∞–∫ –≤–∫—É—Å–Ω–æ –ø–∞—Ö–Ω–µ—Ç‚Ä¶
–°–ø—Ä–∞–≤–∞, –∫–∞–∂–µ—Ç—Å—è, –∫—É—Ö–Ω—è. –ê —Å–ª–µ–≤–∞ ‚Äî –≥–æ—Å—Ç–∏–Ω–Ω–∞—è.
–ö—É–¥–∞ –ø–æ–π–¥—ë–º?`;


/* ================================================= */
/* ================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–û–ï =============== */
/* ================================================= */

function typeText(text, element, choicesEl) {
  element.textContent = '';
  if (choicesEl) choicesEl.classList.remove('visible');

  let i = 0;
  const interval = setInterval(() => {
    element.textContent += text[i];
    i++;

    if (i >= text.length) {
      clearInterval(interval);
      if (choicesEl) choicesEl.classList.add('visible');
    }
  }, 35);
}


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 1 ===================== */
/* ================================================= */

lyingCat.addEventListener('click', () => {
  lyingCat.style.display = 'none';
  standingCat.style.display = 'block';
});

standingCat.addEventListener('click', () => {
  sceneNight.classList.add('hidden');
  sceneCloseup.classList.remove('hidden');
  typeText(calmText, dialogCalm, choicesCalm);
});


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 2 ===================== */
/* ================================================= */

btnYes.addEventListener('click', () => {
  sceneCloseup.classList.add('hidden');
  sceneNightHouses.classList.remove('hidden');
});

btnNo.addEventListener('click', () => {
  sceneCloseup.classList.add('hidden');
  sceneCloseupAngry.classList.remove('hidden');
  typeText(angryText, dialogAngry, choicesAngry);
});

btnOk.addEventListener('click', () => {
  sceneCloseupAngry.classList.add('hidden');
  sceneNightHouses.classList.remove('hidden');
});


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 3 ===================== */
/* ================================================= */

villageCat.addEventListener('click', () => {
  villageCat.style.pointerEvents = 'none';
  dialogVillage.classList.remove('hidden');
  typeText(villageText, dialogVillage, null);

  setTimeout(() => {
    village.classList.add('active');
  }, villageText.length * 35 + 50);
});

village.addEventListener('click', () => {
  if (!village.classList.contains('active')) return;
  sceneNightHouses.classList.add('hidden');
  sceneVillageNearby.classList.remove('hidden');
});


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 4 ===================== */
/* ================================================= */

villageNearbyCat.addEventListener('click', () => {
  villageNearbyCat.style.pointerEvents = 'none';
  dialogHouseHint.classList.remove('hidden');
  typeText(houseHintText, dialogHouseHint, null);

  setTimeout(() => {
    houseLit.classList.add('active');
  }, houseHintText.length * 35 + 50);
});

houseLit.addEventListener('click', () => {
  if (!houseLit.classList.contains('active')) return;

  sceneVillageNearby.classList.add('hidden');
  sceneHouse.classList.remove('hidden');

  sceneHouse.style.pointerEvents = 'none';

  setTimeout(() => {
    dialogHouseIntro.classList.remove('hidden');
    typeText(houseIntroText, dialogHouseIntro, null);
  }, 100);

  setTimeout(() => {
    sceneHouse.style.pointerEvents = 'auto';
    houseWindow.style.pointerEvents = 'auto';
    houseDoor.style.pointerEvents = 'auto';
    giftClosed.style.pointerEvents = 'auto';
  }, houseIntroText.length * 35 + 100);
});


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 5 ===================== */
/* ================================================= */

/* --- –û–∫–Ω–æ ‚Üí –°—Ü–µ–Ω–∞ 5.1 --- */
houseWindow.addEventListener('click', () => {
  sceneHouse.classList.add('hidden');
  sceneWindow.classList.remove('hidden');
});

/* --- –î–≤–µ—Ä—å ‚Üí –°—Ü–µ–Ω–∞ 6 --- */
houseDoor.addEventListener('click', () => {
  sceneHouse.classList.add('hidden');
  sceneCorridor.classList.remove('hidden');

  dialogCorridor.classList.remove('hidden');

  gift6Closed.style.pointerEvents = 'none';
  btnLivingroom.classList.remove('active');
  btnKitchen.classList.remove('active');

  typeText(corridorText, dialogCorridor, null);

  setTimeout(() => {
    gift6Closed.style.pointerEvents = 'auto';
    btnLivingroom.classList.add('active');
    btnKitchen.classList.add('active');
  }, corridorText.length * 35 + 50);
});


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 5.1 =================== */
/* ================================================= */
    
/* --- –ü–æ–¥–∞—Ä–æ–∫ --- */
gift51Closed.addEventListener('click', () => {
  gift51Closed.style.display = 'none';
  gift51Open.style.display = 'block';
  postcard51Overlay.classList.remove('hidden');
});

/* --- –û—Ç–∫—Ä—ã—Ç–∫–∞ ‚Üí –ö–Ω–æ–ø–∫–∞ "–î–∞–ª—å—à–µ" --- */
btnPostcardNext.addEventListener('click', () => {
  postcard51Overlay.classList.add('hidden');
  btnEnterHouse.classList.remove('hidden');
});

/* --- –ö–Ω–æ–ø–∫–∞ "–ó–∞–π—Ç–∏ –≤ –¥–æ–º" ‚Üí –°—Ü–µ–Ω–∞ 6 --- */
btnEnterHouse.addEventListener('click', () => {
  sceneWindow.classList.add('hidden');
  sceneCorridor.classList.remove('hidden');

  dialogCorridor.classList.remove('hidden');

  gift6Closed.style.pointerEvents = 'none';
  btnLivingroom.classList.remove('active');
  btnKitchen.classList.remove('active');

  typeText(corridorText, dialogCorridor, null);

  setTimeout(() => {
    gift6Closed.style.pointerEvents = 'auto';
    btnLivingroom.classList.add('active');
    btnKitchen.classList.add('active');
  }, corridorText.length * 35 + 50);
});


/* ================================================= */
/* =================== –°–¶–ï–ù–ê 6 ===================== */
/* ================================================= */

/* --- –ü–æ–¥–∞—Ä–æ–∫ --- */
gift6Closed.addEventListener('click', () => {
  gift6Closed.style.display = 'none';
  gift6Open.style.display = 'block';
  postcard6Overlay.classList.remove('hidden');
});

/* --- –û—Ç–∫—Ä—ã—Ç–∫–∞ ‚Üí –ö–Ω–æ–ø–∫–∞ "–î–∞–ª—å—à–µ" --- */
btnPostcard6Next.addEventListener('click', () => {
  postcard6Overlay.classList.add('hidden');
});

/* ================================================= */
/* =================== –°–¶–ï–ù–ê 6.1 =================== */
/* ================================================= */

let openedKitchenGifts = 0;

/* ===== –ü–æ–¥–∞—Ä–æ–∫ 04 ===== */
gift6104Closed.addEventListener('click', () => {
  gift6104Closed.style.display = 'none';
  gift6104Open.style.display = 'block';

  postcard61Image.src = 'assets/img/postcard-04.png'; 
  postcard61Overlay.classList.remove('hidden');
});

/* ===== –ü–æ–¥–∞—Ä–æ–∫ 05 ===== */
gift6105Closed.addEventListener('click', () => {
  gift6105Closed.style.display = 'none';
  gift6105Open.style.display = 'block';

  postcard61Image.src = 'assets/img/postcard-05.png'; // 
  postcard61Overlay.classList.remove('hidden');
});


/* ===== –ö–Ω–æ–ø–∫–∞ "–î–∞–ª—å—à–µ" –≤ –æ—Ç–∫—Ä—ã—Ç–∫–µ ===== */
btnPostcard61Next.addEventListener('click', () => {
  postcard61Overlay.classList.add('hidden');

  openedKitchenGifts++;

  /* –µ—Å–ª–∏ –æ—Ç–∫—Ä—ã—Ç—ã –æ–±–∞ –ø–æ–¥–∞—Ä–∫–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É */
  if (openedKitchenGifts === 2) {
    btnGoLivingroom.classList.remove('hidden');
  }
});

/* ================================================= */
/* ================= –ù–ê–í–ò–ì–ê–¶–ò–Ø ===================== */
/* ================================================= */

/* --- –í –≥–æ—Å—Ç–∏–Ω–Ω—É—é (–°—Ü–µ–Ω–∞ 7) --- */
btnLivingroom.addEventListener('click', () => {
  sceneCorridor.classList.add('hidden');
  sceneLivingroom.classList.remove('hidden');
});

/* --- –ù–∞ –∫—É—Ö–Ω—é (–°—Ü–µ–Ω–∞ 6.1) --- */
btnKitchen.addEventListener('click', () => {
  sceneCorridor.classList.add('hidden');
  sceneKitchen.classList.remove('hidden');
});

/* --- –°—Ü–µ–Ω–∞ 6.1 ‚Üí –°—Ü–µ–Ω–∞ 7 --- */
btnGoLivingroom.addEventListener('click', () => {
  sceneKitchen.classList.add('hidden');
  sceneLivingroom.classList.remove('hidden');
});

/* ================================================= */
/* =================== –ü–ò–°–¨–ú–û ====================== */
/* ================================================= */

giftClosed.addEventListener('click', () => {
  giftClosed.style.display = 'none';
  giftOpen.style.display = 'block';

  letterOverlay.classList.remove('hidden');

  let i = 0;
  letterTextEl.textContent = '';
  btnNext.style.display = 'none';

  const interval = setInterval(() => {
    letterTextEl.textContent += letterText[i];
    i++;

    if (i >= letterText.length) {
      clearInterval(interval);
      btnNext.style.display = 'inline-block';
    }
  }, 35);
});

btnNext.addEventListener('click', () => {
  letterOverlay.classList.add('hidden');
  dialogHouseIntro.classList.add('hidden');
});

    
  </script>

</body>
</html>
