<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Happy New Year</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  background: black;
  font-family: 'Montserrat', sans-serif;
}

.scene {
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 100vh;
}

.hidden {
  display: none;
}

.background {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* ===== КОТЫ ===== */
.cat {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  cursor: pointer;
}

.cat--lying {
  bottom: 8vh;
  width: 28vw;
  max-width: 300px;
}

.cat--standing {
  bottom: 11vh;
  width: 50vw;
  max-width: 450px;
  display: none;
}

/* ===== ТЕКСТ ===== */
.dialog {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 85%;
  max-width: 420px;
  color: white;
  font-size: 18px;
  line-height: 1.6;
  white-space: pre-line;
  z-index: 5;
}

.dialog--plain {
  top: 10vh;
}

.dialog--boxed {
  top: 14vh;
  background: rgba(0,0,0,0.72);
  padding: 14px 16px;
  border-radius: 10px;
}

/* ===== КНОПКИ ===== */
.buttons {
  margin-top: 16px;
  display: flex;
  justify-content: space-between;
}

button {
  background: rgba(255,255,255,0.15);
  border: none;
  color: white;
  padding: 10px 18px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}

/* ===== СЦЕНА 3 ===== */
.village-cat {
  position: absolute;
  left: 14%;
  bottom: 9vh;
  width: 42vw;
  max-width: 460px;
  cursor: pointer;
}

.village {
  position: absolute;
  right: 8%;
  bottom: 20vh;
  width: 44vw;
  max-width: 520px;
  cursor: pointer;
  pointer-events: none;
  opacity: 1;
}

.village.active {
  pointer-events: auto;
}
</style>
</head>

<body>

<!-- СЦЕНА 1 -->
<div class="scene" id="scene1">
  <img src="assets/svg/scene-night.svg" class="background">
  <img src="assets/svg/lying-cat.svg" class="cat cat--lying" id="lyingCat">
  <img src="assets/svg/standing-cat.svg" class="cat cat--standing" id="standingCat">
</div>

<!-- СЦЕНА 2 -->
<div class="scene hidden" id="scene2">
  <img src="assets/svg/scene-closeup.svg" class="background">
  <div class="dialog dialog--plain" id="dialog2"></div>
</div>

<!-- СЦЕНА 2.1 -->
<div class="scene hidden" id="scene2a">
  <img src="assets/svg/scene-closeup-angry.svg" class="background">
  <div class="dialog dialog--plain" id="dialog2a"></div>
</div>

<!-- СЦЕНА 3 -->
<div class="scene hidden" id="scene3">
  <img src="assets/svg/scene-night-houses.svg" class="background">
  <img src="assets/svg/village-distant-cat.svg" class="village-cat" id="villageCat">
  <img src="assets/svg/village-distant.svg" class="village" id="village">
  <div class="dialog dialog--boxed hidden" id="dialog3"></div>
</div>

<!-- СЦЕНА 4 -->
<div class="scene hidden" id="scene4">
  <img src="assets/svg/scene-night-village-nearby.svg" class="background">
</div>

<script>
function typeText(text, element, callback) {
  element.textContent = '';
  let i = 0;
  const interval = setInterval(() => {
    element.textContent += text[i];
    i++;
    if (i >= text.length) {
      clearInterval(interval);
      if (callback) callback();
    }
  }, 30);
}

/* СЦЕНА 1 */
lyingCat.onclick = () => {
  lyingCat.style.display = 'none';
  standingCat.style.display = 'block';
};

standingCat.onclick = () => {
  scene1.classList.add('hidden');
  scene2.classList.remove('hidden');

  typeText(
`Я не люблю спешку.
Но в эту ночь даже я решил выйти из тени.

Впереди — огни, тепло
и кое-что, что стоит увидеть.

Хотите ли вы отправиться со мной
в небольшое путешествие этой новогодней ночью?`,
    dialog2,
    () => {
      dialog2.innerHTML += `
        <div class="buttons">
          <button onclick="goYes()">Да</button>
          <button onclick="goNo()">Нет</button>
        </div>`;
    }
  );
};

function goNo() {
  scene2.classList.add('hidden');
  scene2a.classList.remove('hidden');

  typeText(
`Шшшш...
Вы ахуели?

Я для чего, по-вашему, встал?
Хочешь ты или нет — придётся.`,
    dialog2a,
    () => {
      dialog2a.innerHTML += `
        <div class="buttons">
          <button onclick="goScene3()">Ладно</button>
        </div>`;
    }
  );
}

function goYes() {
  goScene3();
}

function goScene3() {
  scene2.classList.add('hidden');
  scene2a.classList.add('hidden');
  scene3.classList.remove('hidden');
}

/* СЦЕНА 3 */
villageCat.onclick = () => {
  villageCat.style.pointerEvents = 'none';
  dialog3.classList.remove('hidden');

  typeText(
`Видите деревушку впереди?
Там тепло и свет.

Пойдёмте к ней.`,
    dialog3,
    () => {
      village.classList.add('active');
    }
  );
};

village.onclick = () => {
  scene3.classList.add('hidden');
  scene4.classList.remove('hidden');
};
</script>

</body>
</html>

